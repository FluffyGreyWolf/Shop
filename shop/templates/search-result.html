{% extends 'base.html' %}
{% block title %}Looking for: {{ searched }}{% endblock %}

{% block content %}
<div class="page-container">
<div class="filters">
    <p>Filters</p>
    <div class="price-filter">
        <form method="GET" action="{% url 'search-result-price-filter' %}">
        <p class="filters-title">Price</p>
        <input class="price-input" type="search" placeholder="Min" name="price-min">
        <input class="price-input" type="search" placeholder="Max" name="price-max">
        <input class="price-input" type="hidden" value="{{ searched }}" name="products">

        <p class="filters-title" style="margin-top: 30px;">Order by:</p>
        <select name="price-order">
            {% if order == 'high' %}
            <option value="high">Highest price</option>
            <option value="low">Lowest price</option>
            {% elif order == 'low' %}
            <option value="low">Lowest price</option>
            <option value="high">Highest price</option>
            {% else %}
            <option value="high">---</option>
            <option value="high">Highest price</option>
            <option value="low">Lowest price</option>
          {% endif %}
        </select>
    </div>
    <button id="price-form-button" type="submit">Search</button>
</form>
</div>
<div class="product-list">
    <p class="result-title">Showing results for {{ searched }}:</p>
{% if page %}
{% for product in page.object_list %}
<ul class="product">
    
    <li class="product-sublist"><img class="product-picture" src="{{ product.picture }}"> <p class="product-text">{{ product.name }} <a href="{% url 'product-detail' product.pk %}">See more</a></p><p class="product-text">{{ product.price }}$</p></li>
</ul>
{% endfor %}
{% else %}
<p class="result-title" style="text-align: center;">There is no items with that name</p>
{% endif %}

    <div class="next-pages">
        {% if page.number == 1 and page.has_next %}
        <a class="nav-link pagination-button page-active" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">1</a>
        -
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.next_page_number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.next_page_number }}</a>
        ...
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.paginator.num_pages  }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.paginator.num_pages }}</a>
        {% elif page.number == page.paginator.num_pages and page.number != 1 %}
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ 1 }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">1</a>
        ...
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.previous_page_number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.previous_page_number }}</a>
        -
        <a class="nav-link pagination-button page-active" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.number }}</a>
        {% elif page.number == 1 %}
        <a class="nav-link pagination-button page-active" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">1</a>
        {% else %}
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ 1 }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">1</a>
        ...
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.previous_page_number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.previous_page_number }}</a>
        -
        <a class="nav-link pagination-button page-active" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.number }}</a>
        -
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.next_page_number }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.next_page_number }}</a>
        ...
        <a class="nav-link pagination-button" href="{% url 'search-result-price-filter' %}?search-form={{ searched }}&page={{ page.paginator.num_pages  }}&price-order={{ order }}&price-min={{ min }}&price-max={{ max }}&products={{ searched }}">{{ page.paginator.num_pages }}</a>
        {% endif %}


    </div>
</div>

</div>

{% endblock %}
